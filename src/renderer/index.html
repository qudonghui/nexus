<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data: blob:; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline';">
  <title>Nexus - All Tools. Zero Connection.</title>
  <link rel="stylesheet" href="styles/main.css">
  <link rel="stylesheet" href="styles/components.css">
  <link rel="stylesheet" href="styles/tools.css">
  <script>
    // 早期错误捕获
    window.addEventListener('error', function(e) {
      console.error('Global error:', e.error);
      alert('应用加载错误: ' + e.error);
    });
    console.log('index.html loaded');
  </script>
</head>
<body>
  <div id="app">
    <!-- 顶部标题栏 -->
    <header class="title-bar">
      <div class="title-bar-left">
        <div class="logo">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
          </svg>
        </div>
        <span class="app-name">Nexus</span>
      </div>
      <div class="title-bar-center">
        <div class="search-wrapper">
          <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/>
            <line x1="21" y1="21" x2="16.65" y2="16.65"/>
          </svg>
          <input type="text" class="search-input" id="searchInput" placeholder="搜索工具..." />
        </div>
      </div>
      <div class="title-bar-right">
        <button class="window-btn minimize-btn" id="minimizeBtn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="5" y1="12" x2="19" y2="12"/>
          </svg>
        </button>
        <button class="window-btn maximize-btn" id="maximizeBtn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
          </svg>
        </button>
        <button class="window-btn close-btn" id="closeBtn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
    </header>

    <!-- 主内容区域 -->
    <div class="main-content">
      <!-- 侧边栏：工具分类 -->
      <aside class="sidebar">
        <nav class="category-nav">
          <button class="category-item active" data-category="all">
            <svg class="category-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 6a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6z"/>
            </svg>
            <span>全部工具</span>
          </button>
          <button class="category-item" data-category="developer">
            <svg class="category-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
            </svg>
            <span>开发者工具</span>
          </button>
          <button class="category-item" data-category="math">
            <svg class="category-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 3h6M3 12h18M9 21h6"/>
            </svg>
            <span>数学计算</span>
          </button>
          <button class="category-item" data-category="design">
            <svg class="category-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <path d="M8 12h8M12 8v8"/>
            </svg>
            <span>设计工具</span>
          </button>
          <button class="category-item" data-category="security">
            <svg class="category-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
              <path d="M7 11V7a5 5 0 0110 0v4"/>
            </svg>
            <span>安全工具</span>
          </button>
          <button class="category-item" data-category="text">
            <svg class="category-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 7V4h16v3M9 20h6M12 4v16"/>
            </svg>
            <span>文本处理</span>
          </button>
        </nav>

        <!-- 最近使用 -->
        <div class="recent-section">
          <h3 class="section-title">最近使用</h3>
          <div class="recent-tools" id="recentTools">
            <!-- 动态生成 -->
          </div>
        </div>
      </aside>

      <!-- 工具列表区域 -->
      <main class="tools-area">
        <div class="tools-grid" id="toolsGrid">
          <!-- 工具卡片将动态生成 -->
        </div>
      </main>
    </div>

    <!-- 工具详情面板 -->
    <div class="tool-panel hidden" id="toolPanel">
      <div class="panel-header">
        <div class="panel-left">
          <button class="back-btn" id="backBtn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="19" y1="12" x2="5" y2="12"/>
              <polyline points="12 19 5 12 12 5"/>
            </svg>
          </button>
          <h2 class="panel-title" id="panelTitle">工具名称</h2>
        </div>
        <button class="favorite-btn" id="favoriteBtn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/>
          </svg>
        </button>
      </div>
      <div class="panel-content" id="panelContent">
        <!-- 工具内容动态加载 -->
      </div>
    </div>
  </div>

  <!-- 加载脚本前的检查 -->
  <script>
    console.log('Before scripts load, DOM ready:', document.readyState);
  </script>

  <!-- 加载脚本 -->
  <script src="scripts/app.js"></script>
  <script src="scripts/tools.js"></script>
  <script>
    // 脚本加载完成检查
    console.log('All scripts loaded');
    console.log('NexusApp exists:', typeof window.NexusApp !== 'undefined');
    console.log('ToolRegistry exists:', typeof window.ToolRegistry !== 'undefined');
    console.log('DOM elements:', {
      toolsGrid: !!document.getElementById('toolsGrid'),
      toolPanel: !!document.getElementById('toolPanel'),
      panelContent: !!document.getElementById('panelContent')
    });
    // 延迟一下确保 DOM 完全渲染
    setTimeout(() => {
      console.log('DOM fully loaded and scripts initialized');
    }, 500);
  </script>
</body>
</html>
